(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-testing-pwa-pwa"],{"0ba3":function(t,e,n){"use strict";n.r(e);var o,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" "+t._s(t.subsss)+" membuat ICON GENERATOR : "),n("a",{attrs:{href:"https://realfavicongenerator.net/"}},[t._v("https://realfavicongenerator.net/")]),n("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button"},on:{click:t.install}},[t._v("Install")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.title,expression:"vdata.title"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"title",name:"title",placeholder:"title"},domProps:{value:t.vdata.title},on:{input:function(e){e.target.composing||t.$set(t.vdata,"title",e.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.content,expression:"vdata.content"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"content",name:"content",placeholder:"content"},domProps:{value:t.vdata.content},on:{input:function(e){e.target.composing||t.$set(t.vdata,"content",e.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.url,expression:"vdata.url"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"url",name:"url",placeholder:"url"},domProps:{value:t.vdata.url},on:{input:function(e){e.target.composing||t.$set(t.vdata,"url",e.target.value)}}}),n("button",{staticClass:"btn btn-sm btn-primary  ",attrs:{type:"button"},on:{click:t.kirim}},[t._v("SEND Notification")])])},i=[],r=(n("d3b7"),n("ac1f"),n("38cf"),n("5319"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("bf19"),n("bc3a")),s=n.n(r),c={data:function(){return{vdata:{content:"content",title:"title",url:{link:"http://localhost:8080"},id_penerima:"1",timestamp:Date.now()+324e5}}},mounted:function(){this.subscribe(),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),o=t}))},methods:{kirim:function(){var t=new FormData;t.append("data",JSON.stringify(this.vdata)),t.append("database","loandocument"),s.a.post("http://localhost:8080/api/send_push_notification.php",t).then((function(t){console.log(t)}))},install:function(){console.log(o),void 0!==o&&(o.prompt(),o.userChoice.then((function(t){"dismissed"==t.outcome?console.log("User cancelled home screen install"):console.log("User added to home screen"),o=null})))},subscribe:function(){var t=this;"Notification"in window?Notification.requestPermission((function(e){"granted"!==e?console.log("notifikasi tidak di perbolehkan"):(t.confPushSub(),console.log("notifikasi aktif"))})):alert("notifikasi tidak didukung ")},confPushSub:function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){var n=this;console.log(e),e.pushManager.getSubscription().then((function(o){null===o&&e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t.urlB64ToUint8Array("BHb6hCsHUmbFb8xXLP46iv_xzns76xPniKia5FiBC1sd7RiAiMuRnv1MbGo-ey5oKYwb_UIo9PBWB-yIrlHJ184")}).then((function(e){console.log("Subscribe OK:",e),t.subsss=e;var o=new FormData;o.append("data","insert into subs (subs) values ('".concat(JSON.stringify(e.toJSON()),"')")),o.append("database","loandocument"),s.a.post("http://localhost:8080/api/mysql/auto.php",o,{headers:{Authorization:localStorage.getItem("auth._token.local")}}).then((function(t){console.log(t),n.$forceUpdate()}))})).then((function(e){console.log(e),t.aktif=!1,localStorage.setItem("subscribe",!0),t.newNotif("Berhasil Subscribe")})).catch((function(t){console.log("Subscribe Error:",t)}))}))}))},newNotif:function(t){var e={body:t,icon:"http://localhost:8080/api/icon.png",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"http://localhost:8080/api/icon.png"};//! cara memunculkan notifikasi dengan windows object
//! cara menjalankan notifikasi dari service worker melalui navigator
"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.showNotification("Subscribe",e)}))},urlB64ToUint8Array:function(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(n),a=new Uint8Array(o.length),i=0;i<o.length;++i)a[i]=o.charCodeAt(i);return a}}},l=c,u=n("2877"),d=Object(u["a"])(l,a,i,!1,null,null,null);e["default"]=d.exports},1148:function(t,e,n){"use strict";var o=n("a691"),a=n("1d80");t.exports="".repeat||function(t){var e=String(a(this)),n="",i=o(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},"38cf":function(t,e,n){var o=n("23e7"),a=n("1148");o({target:"String",proto:!0},{repeat:a})},"5cc6":function(t,e,n){var o=n("74e8");o("Uint8",(function(t){return function(e,n,o){return t(this,e,n,o)}}))},bf19:function(t,e,n){"use strict";var o=n("23e7");o({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})}}]);
//# sourceMappingURL=page-testing-pwa-pwa.8c2c80b4.js.map